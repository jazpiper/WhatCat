# WhatCat 테마/UIUX 재기획안 (2026-02-20)

## 1) 배경
- 기존 기획 문서: `docs/design-system.md`
- 최근 변경 커밋:
  - `e47496e` 디자인 시스템 컴포넌트 도입/페이지 적용
  - `cbdf7fc` 전역 다크모드 CSS 오버라이드 추가

## 2) 현재 문제 진단
- 토큰과 구현이 분리되어 있음.
  - 문서는 토큰 기반 설계를 말하지만, 실제는 `globals.css`에 유틸리티 클래스 단위 강제 오버라이드(`!important`)가 많아 유지보수가 어려움.
- 타이포 전략이 충돌함.
  - `layout.tsx`에서 Geist 폰트를 로드하지만 `globals.css`의 `body`가 `Arial, Helvetica`로 덮어씀.
- 다크모드 안정성이 낮음.
  - `.dark .bg-white`, `.dark .text-gray-800` 같은 전역 치환 방식은 페이지별 의도 색상까지 깨뜨릴 수 있음.
- 전역 모션 정책이 과도함.
  - `*` 전체에 색상 transition을 걸어 성능/예측 가능성에 불리함.
- 테마 토글 UX가 내비게이션 스타일에 종속됨.
  - 토글 배경/대비가 내비게이션 컨텍스트 외에서 재사용되기 어려움.

## 3) 재기획 목표
- 단일 토큰 체계로 라이트/다크를 안정적으로 운영한다.
- 한국어 중심 타이포그래피를 명시적으로 확정한다.
- 토글/내비게이션/카드/섹션의 시각 언어를 통일한다.
- 전역 오버라이드 방식 제거 후 컴포넌트 단위로 책임을 분리한다.

## 4) 비목표 (이번 라운드)
- 정보구조(메뉴 체계) 전면 개편
- 신규 기능 추가
- 애니메이션 시스템 대규모 도입

## 5) 핵심 설계 결정

### A. 테마 아키텍처
- `next-themes` 유지 (`light` / `dark` / `system`).
- 전역 CSS는 “유틸리티 클래스 치환”이 아니라 “시맨틱 CSS 변수”만 정의.
- 예시 토큰:
  - `--bg-page`, `--bg-surface`, `--text-primary`, `--text-secondary`, `--border-default`, `--accent-primary`
- 컴포넌트는 Tailwind arbitrary value 또는 매핑 클래스로 변수만 소비.
- `!important` 기반 다크모드 강제 규칙 제거.

### B. 타이포그래피
- 기본 본문 폰트: 한국어 가독성 우선 폰트로 통일(예: `Pretendard` 또는 `Noto Sans KR`) + Geist fallback.
- 단계형 폰트 스케일 정의:
  - Display, H1, H2, Body, Caption
- 페이지 타이틀/카드 타이틀/본문의 weight를 고정해 랜덤한 굵기 사용 방지.

### C. 테마 토글 UX
- 토글을 독립 컴포넌트로 재설계:
  - 명확한 상태(`라이트`, `다크`, `시스템`) 표현
  - 키보드 접근성(포커스 링, `aria-label`, `aria-pressed` 또는 라디오 패턴) 보장
- 배경 대비는 전역 내비게이션 팔레트와 분리해서 항상 읽히게 구성.

### D. UI 컴포넌트 규격화
- `PageContainer`, `Card`, `PageTitle`, `Section`의 variant를 축소/정리:
  - `Card`: `default`, `outline`, `elevated`
  - `Section`: 의미 기반(`info`, `tip`, `warning`)로 전환 검토
- 각 컴포넌트에 “금지사항” 명시:
  - 임의 gradient 남발 금지
  - 텍스트 대비 4.5:1 미만 금지

## 6) 실행 계획 (우선순위)

### P0. 테마 안정화 (필수)
- `globals.css` 정리
  - 전역 `.dark .bg-*`, `.dark .text-*` 오버라이드 제거
  - 전역 `*` transition 제거
- 폰트 적용 충돌 해결 (`body` 폰트 선언 재정의)
- 토큰 변수 라이트/다크 값 확정

### P1. 컴포넌트 재정렬
- `ThemeToggle`를 3상태 선택 UX로 개선
- `Navigation` 색상/대비 규칙을 토큰 소비 방식으로 변경
- 공용 UI 컴포넌트의 variant/API 확정 및 문서 업데이트

### P2. 페이지 적용 정리
- 우선 페이지: `/`, `/nyongmatch`, `/result`, `/breeds`
- 이후 페이지 확장 적용 + 예외 케이스(배너/광고/서드파티 위젯) 검수

## 7) 산출물
- 기획 문서 1개(본 문서)
- 토큰 명세 문서 1개(`docs/design-tokens.md` 신규)
- 컴포넌트 사용 가이드 개정(`docs/design-system.md` 업데이트)
- QA 체크리스트 1개(테마/접근성/반응형)

## 8) 완료 기준 (Definition of Done)
- 라이트/다크 전환 시 주요 페이지 0건 시각 깨짐
- 본문/타이틀 폰트가 모든 페이지에서 동일 규칙으로 적용
- 테마 토글 키보드 탐색/스크린리더 문구 정상
- Lighthouse 접근성 점수 하락 없음(기준 대비 유지 또는 개선)

## 9) 리스크 및 대응
- 리스크: 기존 페이지의 하드코딩 색상과 신규 토큰 충돌
  - 대응: 페이지별 diff 리뷰 + 우선 페이지부터 점진 적용
- 리스크: 다크모드 회귀
  - 대응: 시나리오 스냅샷(홈/테스트/결과/품종) 비교 체크
